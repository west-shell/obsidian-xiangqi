# Obsidian 中国象棋插件

![版本](https://img.shields.io/badge/版本-1.0.0-blue.svg)
[![许可证](https://img.shields.io/badge/许可证-MIT-green.svg)](./LICENSE)
[![英文](https://img.shields.io/badge/语言-英文-blue)](./README.MD)
[![中文](https://img.shields.io/badge/语言-简体中文-green)](./README.zh-CN.MD)

## 插件简介

**Obsidian 中国象棋插件** 是一款为 Obsidian 笔记软件量身打造的中国象棋渲染引擎，支持以 FEN 和 PGN 格式展示棋局，并可进行手动演示与推演。插件提供丰富的自定义设置、棋谱导航、保存等功能。

## 示例演示

````markdown
```xiangqi
3akab2/1R1Pn4/c6C1/p3P3p/4p1b2/1R7/P3c3P/C3B4/1nr1A4/4KAB2
H7-E7 G5-E7
D8-D9 E9-D9
B8-D8 D9-D8
B4-D4 A7-D7
D4-D7 D8-D7
E6-D6 D7-D8
A2-D2 E3-D3
D6-D7 D8-D9
D7-D8 D9-E9
D8-D9
```
````

## 效果预览

![PGN 展示](./IMAGE/show1.png)
![棋盘展示](./IMAGE/show2.png)

## 功能特点

- **棋盘渲染**：可在笔记中展示并复盘中国象棋棋局
- **自定义设置**：

    - 支持深色 / 浅色主题
    - 可调整按钮位置（右侧 / 底部）
    - 可调节棋盘大小
    - 设置修改后自动应用，不会重置当前棋局

- **棋谱保存**：

    - 支持将走棋历史保存为 PGN 格式
    - 无 PGN 时保存按钮为**橙色**，有 PGN 时为**绿色**
    - 点击保存时弹出确认提示
    - 若当前无任何走棋记录，保存操作将清空原有 PGN

- **移动端适配**：通过手动调整棋盘大小和按钮位置，可适配手机等小屏设备
- **朗读功能**：可选的语音播报走棋内容（可在设置中启用/关闭）
- **格式支持**：兼容 FEN 和 ICCS 风格的 PGN 棋谱

## 使用方法

1. 将棋谱写入以 `xiangqi` 标记的代码块中
2. FEN 格式可省略，默认从标准开局开始
3. PGN 会被自动解析
4. 操作说明：

    - 若未手动走棋，“下一步”会播放 PGN 步数
    - 使用“上一步”/“下一步”可浏览走棋记录
    - 手动走棋后，“下一步”将不再跟随原 PGN
    - 点击“重置”恢复 PGN 演示功能

5. 点击“保存”将用当前走法覆盖原 PGN 内容

## 安装说明

1. 下载插件文件
2. 在 Obsidian 中：

    - 打开 **设置 → 第三方插件**
    - 关闭 **安全模式**

3. 打开插件目录：

    - 电脑端点击 📂 按钮
    - 移动端需手动打开 `你的仓库/.obsidian/plugins`
    - 新建一个文件夹并放入插件文件

4. 启用插件

_注：即将上线 Obsidian 官方插件市场（搜索“Chinese chess”）_
